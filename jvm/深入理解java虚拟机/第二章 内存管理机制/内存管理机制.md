## JVM运行的数据区域

运行区域包括：程序计数器、Java虚拟机栈、本地方法区、java堆、方法区、直接内存。

- 程序计数器
  - 指示当前线程所执行的字节码的指令的地址，字节码指示工作时通过计数器来选取下一条要执行的指令。他是线程私有的，每个线程一个程序计数器，不会公用。
  - 记录正在执行的字节码的地址
  - 执行本地方法的时候为空
  - 不会出现内存泄露
- Java虚拟机栈（可能会有栈溢出的可能 ）
  - 线程私有的，每个方法执行就会创建一个栈，用于存储局部变量、操作数据帧、动态链接、方法出口。
  - 防止有了一个无线深度的操作，就会出现Stack OverflowError
  - 每个方法的执行都会随着入栈个出栈的操作
  - 栈的开辟也需要存储空间，那么就会造成内存溢出。
- 本地方法栈
  - 为本地的native提供服务
- java堆
  - 创建的对象存放的位置（实例存放的位置）
  - 垃圾回收的主要区域
  - 可能会排除内存溢出
  - 可以是无论上不连续
  - 可以设置其大小
  - 回收方式采样的是分代回收机制
- 方法区
  - 存储以被虚拟机加载的类信息、常量、静态变量，即时编译后的代码等。
    - 类名包括Class类，修饰符、常量池、字段描述、方法描述等
  - 垃圾回收相对比较少的区域
  - 运行时常量池是方法区的一个部分
  - 可能会抛出OOM
- 直接内存



#### HotSpot虚拟机对象探秘

**常见对象**

- 当遇到new指令时，先判断这个类是否被加载、解析、初始化过，如果没有，先执行相应类的加载过程。
- 类加载之后就会对其分配内存，如果堆内存是规整的，那么就采用指针碰撞分配，如果是不规整的，那么就采用空闲列表的分配方式，内存是否规整取决于垃圾回收期是否带有压缩整理功能



































































