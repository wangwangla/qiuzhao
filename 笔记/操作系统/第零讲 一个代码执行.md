## 操作系统概述

#### 操作系统做了什么？

```java
#include<stdio.h>
int main(){
	puts("hello world!");
	return 0;
}
```

上述程序执行之后，会在屏幕上显示出HelloWorld。

#### 执行步骤

- 用户需要回收操作系统执行这个程序（然后告知？？？）

  - 命令行输入命令
  - 双击一个可以执行程序

- 操作系统做什么？？

  - 根据用户输入分析出执行的文件
  - 根据程序首部信息确定执行的位置并计算出对于磁盘的地址。
  - 创建一个进程，将文件映射到该进程结构，通过该进程执行helloworld。
  - 为执行程序设置CPU上下文环境，并调到程序开始出执行。
  - 执行的第一步就会有却页异常，因为文件并没加载到内存。
  - 操作系统会分配一个物理内存，将代码从磁盘读取内存，然后继续执行程序，从前面计算出的地址，将代码文件存入到地址中。（一页不够就会出现多次缺页异常）
  - 执行puts函数，显示一个字符串
  - 操作系统将字符串送到显示器，一般是由进程控制

- 操作系统的可执行格式

  - windows 下是pe
  - unix下是elf

  