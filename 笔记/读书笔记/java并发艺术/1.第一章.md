# 并发编程的挑战
```
```
## 上下文切换
```
    单个CPU 执行多个线程任务，CPU通过高速切换达到同时执行的目的，在执行的过程中，通过记录当前的状态，然后在去执行下一个任务，一个任务执行时间片结束在进行切换，上下文就是一次记录状态到下一次重新获取值的一个过程，就是一次上下文。
    时间片比较短，所以可以看到同时执行的效果。

```
## 上下文切换引发的问题
```
    通过以上，我们可以知道单个执行多线程任务【少余CPU核数执行任务】就会导致达到一定任务数的时候，执行会减慢，所以在多线程执行下执行速度不一定会最快。

```
### 如何较少上下文切换
```
    减少上下文切换无锁并发编程
    CAS算法
    使用最少的线程
    协程：在单线程里面实现多任务的调用，在单线程下维持多个任务间的切换
```
### 死锁
```
    出现死锁：
        一个线程有多个锁
        一个线程中有多个资源
    解决死锁：
        一个线程一把锁
        一个线程一个资源
        使用定时锁
        数据库中的锁，放在数据库连接里，否则会出现解锁失败。
