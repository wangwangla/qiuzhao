# 类加载
```
```
## 什么是类加载？
```
    类加载就是将.class文件加载到内存的过程，将其放在运行时数据区的方法区内，然后创建一个java.lang.Class对象，用来封装类在方法区中的数据结构，最终在堆中生成对象，对象封装了方法区的数据结构，并向用户提供接口。

    类加载器在预料使用某个类的时候加载它，并不需要等待使用的时候才加载，如果遇到了.class的缺失，就会报错，但是如果一直未使用并不会报错。

```
## 加载.class文件的方式
```
    从本地系统中直接加载
    从网络下载.class
    从jar和zip中加载
    从专有数据库中加载
    从java源码中动态加载

```
## 类的声明周期
```

    加载 验证 准备 解析 初始化  使用  卸载
    加载过程包括加载、验证、准备、解析、初始化五个阶段，解析的顺序不一定之外，其他的步骤都是确定的，这个主要是java中存在动态绑定
    上面的是按照顺序执行的，但不是顺序执行的

```
## 加载
```
    查找并加载的二进制数据类加载付出的第一阶段，在加载阶段，虚拟机完成三件事
        通过一个类的全类的全限定名获取一个指定的二进制字节流
        将字节中的静态存储结构转换为方法区中的运行时数据结构
        在java堆中生成一个代表这个类的对象，作为方法区中这些数据的访问入口。
    
    类加载阶段可控性比较强，可以使用系统提供的类加载器，也可使用自己定义的类加载器来完成。

    加载完成后，二进制字节流就按照虚拟机的所需格式存储在方法区中，在堆创建对象的时候，便可以从方法区中加载这些数据。
  

  上面将二进制的文件加载方法区中，按照固定的格式存放。

```
## 验证
```
    验证，为了确保class文件字节流的正确性，分为以下四个阶段
    （1）文件格式验证
        是否按照class文件的格式
    （2）元数据验证
        字节码描述的语义分析，是否符合java语言的规范
    （3）字节码验证
        通过数据流和控制流分析，确保程序语义是合法的、逻辑是符合的
    （4）符合引用验证
        确保解析可以正确执行


它是选择的，不是必须的，对于运行期没有影响。

```
## 准备
```
    为类的静态变量分配内存，将其设置为默认值
    为类变量分配内存并进行设置初始值的阶段，这些内存都将在方法区中分配【我看到这里有点疑问，其实是我太着急了】
    注意：
        分配内部仅为static，不包括实例变量
        初始值即就是数据类型的默认值。这个时候程序的值，还未开始，直到初始化的时候才会设置代码中的参数。
    
        （1）对于全局变量不赋值，会有默认值，局部变量没有
           【局部变量会报错】
        （2）final修饰的必须赋值
        （3）引用数据类型是有初始值的
        （4）数组在初始化的时候会有默认值
```
## 解析
```
    将类中的符号引用转换为直接引用
    解析：虚拟机常量池中的符号引用替换为知己引用的过程

```
## 初始化
```
    初始化，为类的静态变量赋值正确的初始值，JVM负责对类进行初始化
    （1）声明类变量是指定初始值
    （2）使用静态代码为类指定初始值

```
## JVM加载
```
    1.假如这个类没有被加载和连接，则程序先加载并连接
    2.父类父类未加载，则先初始化直接父类
    3.类中有初始化语句，则依次加载初始语句

```
## 类初始化的时机
```
    创建类的实例，new
    访问某个类或者接口的静态变量




























