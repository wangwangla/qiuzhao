## 数据链路层

链路：就是端到端之间，中间没有任何其他设备。

数据链路:将协议加到链路上，就是数据链路。

一个网线就是意图线路，但是将它接到网卡上就是一条线路了。

链路层对数据包进行封装，标记哪里是头，哪里是尾。数据包---》帧

##### 这里需要完成的任务

- 数据包封装成帧

  - 标记开始和结束，然后在传输的过程中就可以准确到达

    **问题：**加入恰巧有一个开始和结束

    **解决：**会在（假的）的开始和结尾的前面加上一个ESC

- 透明传输

  - 在传输过程中加入的一些标志为，在接收的时候将其删除掉了，这既是透明传输。

- 差错控制

  - 这里仅仅是无差错的接收和传输，错误的就丢掉（没收到），重发是传输层控制的。

#### 数据链路层协议

PPP协议（用在广域网中），可以进行身份验证，，点对点通信。

### 局域网中（广播链路）

以太网是链路层的协议（CSMA/CD）：
**总线型以太网**是给所有的计算集都发送数据，是给自己发的就接收，不是就不接收。在发送的时候先检测是否有企其他计算机在发， 如果没有其他计算机发，自己再发，使用的是碰撞检测 。 

### 碰撞检测

发生过程中，数据碰撞检测方式：如果发生碰撞就会进行叠加，发送的计算机也会感觉到电压变大，那么就说明产生了碰撞，那么就等一下在继续发送。



### 传播时延对载波监听的影响

 它的最大时间为2t，

CSMA/CD协议的只能进行单双工，不可以进行全双工

集线器只支持半双工。

总结：发生碰撞的时间为2倍的t，只有在2t之间都没有才可以认为是没有碰撞的 



**举例：**一个10M的集线器，假如接入4个，那么带宽为2.5M，





### 以太网

以太网是不可靠的交付，进行的是最大交付。如果数据有问题就直接的丢掉了。（丢掉的数据是由传输层进行差错控制的）

- 集线器内部结构

  ![1569248218089](photo\1569248218089.png)

集线器内部比较简单，发送数据的时候，都可以收到，并且组成的是一个局网，数据不安全。里面的带宽是共享的。10BASE-T

### 扩展以太网

扩展以太网使用，使用光纤传输，就可以传输到更远的地方。

我们使用集线器，将多个集线器连接起来就会变成一个大的冲突。

为了解决冲突域，我们可以使用网桥来连接他们。网桥可以将数据转发到多个网络中。

- 他可以学习mac地址，然后根据学习的结果绝定数据要不要通过网桥
- 如果是在同一侧，那么就不会产生冲突

交换机就是使用这种方式，他可以学习mac地址表，所以使用交换机连接的局域网是不存在冲突的。

![1569334556588](E:\蒋瑜\qiuzhao\笔记\计算机网络\photo\1569334556588.png)