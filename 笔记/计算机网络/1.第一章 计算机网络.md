## 计算机网络第一章

**局域网**：局域网网线长度不会超过100米。

![1568730856680](photo\1568730856680.png)

- 特点：
  - 范围小
  - 自己维护，自己维修
  - 带宽：10M 100M 1000M

**广域网**：自己租带宽，别人来维护

**Internet**由各个运营商组成（ISP组成）

跨运行商是非常慢的，所以为了速度会有一些解决办法 。一把在下载东西的时候，会出现选择使用哪一个进行下载。

- 方法一，每个运营商放一个
- 方式二,在多线机房部署

### 访问网页的过程

![1568732446268](photo\1568732446268.png)

这个过程中，数据包的IP是不变的，数据帧的mac地址是发生改变的，每次经过路由转发都会进行一次改变。

数据包： 数据 源ip 目标IP 

数据帧 ： 数据 源ip 目标IP 源MAC 目标MAC

物理地址决定了下一跳



A点的位置，开始看一下网络的IP网段，决定去B还是C,选择一条最短的路径。一直到达服务器，然后在服务器将数据传递回来，数据的大小小于1500字节，所以需要切割。

然后将数据放到网卡的缓存中，然后将数据发生回去。一块一块的发送，发生的时候网卡的数据不可以删除，知道接收成功之后才会删除掉。接收到信息，就会在页面上进行拼凑页面。（有时候看到的图片是一部分一部分显示的出来的）

### OSI分层

**应用层**：可以产生应用流量的应用程序。

**表示层**:数据是不是加密,数据是不是压缩(开发人员做的事情,比如传递英文，却用其他不支持的编码格式查看出现乱码，这就是表示层的问题)

**会话层：**浏览器与服务器建立的连接就是会话，

**传输层**：

- *流量控制*：发的太快，通知慢点发送。
- *不可靠传输*不需要建立会话的连接（不可靠连接）	

**网络层**：规划网络路径，规划IP

**数据链路层：**帧的开始和结束  差错校验

**物理层：**规定了接口  规定了电器  传输的速率

```
//查看会话
C:\Users\Administrator>netstat -n

活动连接

  协议  本地地址          外部地址        状态
  TCP    192.168.1.5:61327      192.144.198.149:7823   ESTABLISHED
  TCP    192.168.1.5:61834      120.92.79.46:7823      ESTABLISHED
  TCP    192.168.1.5:61835      64.233.188.188:5228    ESTABLISHED
  TCP    192.168.1.5:61879      111.62.241.131:443     ESTABLISHED
  TCP    192.168.1.5:61927      183.192.200.40:80      ESTABLISHED
  TCP    192.168.1.5:61930      121.51.0.176:36688     TIME_WAIT
  TCP    192.168.1.5:61931      117.185.116.142:80     TIME_WAIT
  TCP    192.168.1.5:61932      117.185.116.142:80     TIME_WAIT
  TCP    192.168.1.5:61933      117.185.116.142:80     TIME_WAIT
  TCP    192.168.1.5:61934      211.159.235.96:80      TIME_WAIT
  TCP    192.168.1.5:61935      120.92.82.179:443      CLOSE_WAIT
  TCP    192.168.1.5:61936      120.221.181.203:80     ESTABLISHED
//查看谁创建的会话
C:\Users\Administrator>netstat -nb

活动连接

  协议  本地地址          外部地址        状态
  TCP    192.168.1.5:61327      192.144.198.149:7823   ESTABLISHED
 [TSBrowser.exe]
  TCP    192.168.1.5:61834      120.92.79.46:7823      ESTABLISHED
 [TSBrowser.exe]
  TCP    192.168.1.5:61835      64.233.188.188:5228    ESTABLISHED
 [TSBrowser.exe]
  TCP    192.168.1.5:61879      111.62.241.131:443     ESTABLISHED
 [TSBrowser.exe]
  TCP    192.168.1.5:61927      183.192.200.40:80      ESTABLISHED
 [QQPCTray.exe]
  TCP    192.168.1.5:61930      121.51.0.176:36688     TIME_WAIT
  TCP    192.168.1.5:61931      117.185.116.142:80     TIME_WAIT
  TCP    192.168.1.5:61932      117.185.116.142:80     TIME_WAIT
  TCP    192.168.1.5:61933      117.185.116.142:80     TIME_WAIT
  TCP    192.168.1.5:61934      211.159.235.96:80      TIME_WAIT
  TCP    192.168.1.5:61936      120.221.181.203:80     ESTABLISHED
 [TSBrowser.exe]
  TCP    192.168.1.5:61937      117.185.116.142:80     TIME_WAIT
  TCP    192.168.1.5:61938      121.51.0.176:36688     TIME_WAIT
  TCP    192.168.1.5:61943      117.185.116.142:80     TIME_WAIT
  TCP    192.168.1.5:61944      117.185.116.142:80     TIME_WAIT
  TCP    192.168.1.5:61947      121.51.0.176:36688     TIME_WAIT

```



无论是IPV4 IPV6不同的仅仅是网络层的不同



#### 排除网络故障

一般地顺序是从下到上的顺序。

- 物理层：首先查看是不是网线解除不良的原因
  - 网线的问题
  - 看发送包和接受包
- 联路层的问题
  - MAC冲突 
  - 欠费
  - 网速不统一：一般漏油会自动协商网速的，但是强制之后，就会出现速度不一致
- 



